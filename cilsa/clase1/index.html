<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Formulario de datos personales</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link href="estilo.css" rel="stylesheet">
    </head>

    <body>
        <h2>DATOS PERSONALES</h2><br>

        <div class="contenido">
            <form id="formulario">

                <label for="nombre">Nombre:</label><br>
                <input type="text" id="nombre" name="nombre" placeholder="Sofia" required><br><br>

                <label for="apellido">Apellido:</label><br>
                <input type="text" id="apellido" name="apellido" placeholder="López" required><br><br>

                <label for="email">Correo electrónico:</label><br>
                <input type="email" id="email" name="email" placeholder="correo@gmail.com" required><br><br>

                <label for="fecha">Fecha de nacimiento:</label><br>
                <input type="date" id="fecha" name="fecha" required><br><br>

                <label for="pais">País de residencia:</label><br>
                <select name="pais" id="pais" required>
                    <option value="">Seleccione su país</option>
                    <option value="ar">Argentina</option>
                    <option value="ur">Uruguay</option>
                    <option value="br">Brasil</option>
                </select>

                <br><br>
                <button type="submit" class="enviar">Enviar</button><br>
            
            </form>

            <button class="btn btn-outline-light" onclick="cambiarEstilo('normal')">Estilo 1</button>
            <button class="btn btn-outline-light" onclick="cambiarEstilo('contraste')">Alto contraste</button>
        </div>

        <script>
            document.getElementById('formulario').addEventListener('submit', function(event) { 
                const nombre = document.getElementById('nombre').value.trim(); 
                const apellido = document.getElementById('apellido').value.trim(); 
                const email = document.getElementById('email').value.trim(); 
                const fecha = document.getElementById('fecha').value; 
                const pais = document.getElementById('pais').value; 

                const valNombreApellido = /^([a-zA-Z]{2,}\s?)+$/; 
                const valEmail = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

                if(!valNombreApellido.test(nombre)) { 
                    alert('Nombre o caracteres inválidos.');
                    event.preventDefault();
                    return;  
                }

                if(!valNombreApellido.test(apellido)) { 
                    alert('Apellido o caracteres inválidos.');
                    event.preventDefault();
                    return;  
                }

                if(!valEmail.test(email)){ 
                    alert('Formato de email inválido.'); 
                    event.preventDefault(); 
                    return; 
                }

                const hoy = new Date(); 
                const fechaNacimiento = new Date(fecha); 
                const edad = hoy.getFullYear() - fechaNacimiento.getFullYear(); 
                const mesDif = hoy.getMonth() - fechaNacimiento.getMonth(); 
                const diaDif = hoy.getDay() - fechaNacimiento.getDay(); 
                
                if(mesDif < 0 || (mesDif === 0 && diaDif < 0)) { 
                    edad--; 
                }

                if(edad < 18){ 
                    alert('Debe ser mayor de 18 años.'); 
                    event.preventDefault(); 
                    return; 
                }

                if(!nombre || !apellido || !email || !fecha || !pais){
                    alert('Por favor, introduzca todos los datos')
                    event.preventDefault(); 
                } else{ 
                    alert('Los datos fueron enviados con éxito')
                }

            });  

            function cambiarEstilo(estilo){ 
                if(estilo === 'normal'){ 
                    document.body.classList.remove('contraste'); 
                } else if(estilo === 'contraste'){
                    document.body.classList.add('contraste') 
                }
            }
        </script>
    </body>
</html>